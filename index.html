<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sport Tracker Pro</title>

    <!-- –û–°–ù–û–í–ù–ê–Ø –ò–ö–û–ù–ö–ê -->
    <link rel="icon" href="icons/favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="icons/favicon.ico" type="image/x-icon">

    <!-- APPLE TOUCH ICONS (–¥–ª—è iOS) -->
    <link rel="apple-touch-icon" href="icons/icon-57.png">
    <link rel="apple-touch-icon" sizes="57x57" href="icons/icon-57.png">
    <link rel="apple-touch-icon" sizes="72x72" href="icons/icon-72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="icons/icon-114.png">
    <link rel="apple-touch-icon" sizes="144x144" href="icons/icon-144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="icons/icon-152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="icons/icon-180.png">
    <link rel="apple-touch-icon" sizes="192x192" href="icons/icon-192.png">

    <!-- STANDARD PWA ICONS (–¥–ª—è Android) -->
    <link rel="icon" type="image/png" sizes="192x192" href="icons/icon-192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="icons/icon-512.png">

    <!-- MANIFEST -->
    <link rel="manifest" href="manifest.json">

    <!-- PWA META TAGS -->
    <meta name="theme-color" content="#007AFF">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Sport Tracker Pro">

    <!-- WINDOWS/IE SUPPORT -->
    <meta name="msapplication-TileColor" content="#007AFF">
    <meta name="msapplication-TileImage" content="icons/icon-144.png">
    <meta name="msapplication-config" content="browserconfig.xml">

    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>

    <!-- –°—Ç–∏–ª–∏ -->
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <!-- –õ–æ–∞–¥–µ—Ä -->
    <div class="loader" id="loader">–ó–∞–≥—Ä—É–∑–∫–∞...</div>

    <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
    <div class="notification" id="notification"></div>

    <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ -->
    <div class="modal" id="workoutModal">
        <div class="modal-content">
            <div class="modal-title" id="modalExerciseName"></div>
            <div class="workout-details" id="workoutDetails"></div>
            <button class="close-modal" onclick="app.closeWorkoutModal()">–ó–∞–∫—Ä—ã—Ç—å</button>
        </div>
    </div>

    <div class="modal" id="forgotPasswordModal">
        <div class="modal-content">
            <div class="modal-title">üîê –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è</div>
            <div class="modal-description">–í–≤–µ–¥–∏—Ç–µ –≤–∞—à email –¥–ª—è —Å–±—Ä–æ—Å–∞ –ø–∞—Ä–æ–ª—è</div>
            <input type="email" id="forgotPasswordEmail" class="auth-input" placeholder="–í–∞—à email">
            <div class="sync-status" id="forgotPasswordStatus"></div>
            <div class="modal-buttons">
                <button class="modal-btn primary" onclick="app.sendPasswordReset()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É</button>
                <button class="modal-btn secondary" onclick="app.closeForgotPassword()">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>
    </div>

    <div class="container">
        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
        <div class="nav">
            <button class="nav-button active" data-tab="home">üìÖ –ö–∞–ª–µ–Ω–¥–∞—Ä—å</button>
            <button class="nav-button" data-tab="workout">üí™ –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</button>
            <button class="nav-button" data-tab="analytics">üéØ –ü—Ä–æ–≥—Ä–µ—Å—Å</button>
            <button class="nav-button logout-nav" id="logoutButton" style="display: none;">üö™ –í—ã–π—Ç–∏</button>
        </div>

        <!-- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ç–µ–º—ã -->
        <div class="theme-toggle-container">
            <button class="theme-toggle" id="themeToggle">
                <span class="theme-icon" id="themeIcon">üåô</span>
                <span id="themeText">–¢–µ–º–Ω–∞—è —Ç–µ–º–∞</span>
            </button>
        </div>

        <!-- –ö–æ–Ω—Ç–µ–Ω—Ç–Ω—ã–µ –±–ª–æ–∫–∏ -->
        <div class="content-container">
            <!-- –î–æ–º–∞—à–Ω—è—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ -->
            <div id="home" class="content active">
                <div class="title">Sport Tracker Pro</div>

                <!-- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è -->
                <div class="auth-section" id="authSection">
                    <div class="auth-title">üîê –í—Ö–æ–¥ / –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</div>
                    <div class="auth-form">
                        <input type="email" id="authEmail" class="auth-input" placeholder="Email" required>
                        <input type="password" id="authPassword" class="auth-input" placeholder="–ü–∞—Ä–æ–ª—å" required>
                        <div class="auth-buttons">
                            <button class="auth-button" id="signInButton">–í–æ–π—Ç–∏</button>
                            <button class="auth-button secondary" id="signUpButton">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
                        </div>
                    </div>
                    <a href="#" id="forgotPasswordLink" class="forgot-password-link">–ó–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å?</a>
                    <div class="sync-status" id="authStatus"></div>
                </div>

                <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ -->
                <div class="user-info" id="userInfo" style="display: none;">
                    <div class="user-email" id="userEmail"></div>
                </div>

                <!-- –ö–∞–ª–µ–Ω–¥–∞—Ä—å -->
                <div class="calendar">
                    <div class="calendar-header">
                        <button class="calendar-nav" id="prevMonth">‚Üê</button>
                        <div class="calendar-month" id="currentMonth"></div>
                        <button class="calendar-nav" id="nextMonth">‚Üí</button>
                    </div>
                    <div class="calendar-grid" id="calendarGrid"></div>
                </div>

                <!-- –ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ -->
                <div class="workout-history" id="dateWorkouts" style="display: none;"></div>

                <!-- –ú–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω—ã–π –±–ª–æ–∫ -->
                <div class="motivation-section" id="motivationBlock">
                    <div class="motivation-title">üí™ –î–≤–∏–≥–∞–π—Å—è –∫ —Ü–µ–ª–∏!</div>
                    <div class="motivation-text">–ö–∞–∂–¥–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –¥–µ–ª–∞–µ—Ç —Ç–µ–±—è —Å–∏–ª—å–Ω–µ–µ. –û—Ç—Å–ª–µ–∂–∏–≤–∞–π –ø—Ä–æ–≥—Ä–µ—Å—Å, –¥–æ—Å—Ç–∏–≥–∞–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤!</div>
                    <div class="motivation-quote">"–ü–æ–±–µ–¥–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å —Ä–µ—à–µ–Ω–∏—è –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å"</div>
                </div>

                <!-- –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ -->
                <div class="backup-section" id="backupSection" style="display: none;">
                    <div class="backup-title">üì¶ –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ</div>
                    <div class="backup-buttons">
                        <button class="backup-btn" id="exportButton">üì§ –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö</button>
                        <label class="backup-btn import">üì• –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
                            <input type="file" class="file-input" id="importFile" accept=".json">
                        </label>
                    </div>
                </div>
            </div>

            <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ -->
            <div id="workout" class="content">
                <div class="title">–ù–æ–≤–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</div>
                <div class="workout-date-display">üìÖ –î–∞—Ç–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏: <span id="selectedDateText">–°–µ–≥–æ–¥–Ω—è</span></div>
                <div class="body-weight-section" id="bodyWeightSection" style="display: none;">
                    <div class="body-weight-title">üèãÔ∏è –í–∞—à –≤–µ—Å (–∫–≥):</div>
                    <input type="number" id="bodyWeightInput" class="body-weight-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –≤–µ—Å">
                </div>
                <div class="section-title">1. –í—ã–±–µ—Ä–∏—Ç–µ –≥—Ä—É–ø–ø—É –º—ã—à—Ü:</div>
                <div class="groups-container" id="groupsContainer"></div>
                <div id="exercisesSection" style="display: none;">
                    <div class="section-title" id="exercisesTitle">2. –í—ã–±–µ—Ä–∏—Ç–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ:</div>
                    <div class="exercises-container" id="exercisesContainer"></div>
                </div>
                <div id="setsSection" style="display: none;">
                    <div class="section-title" id="setsTitle">3. –ü–æ–¥—Ö–æ–¥—ã –¥–ª—è: <span id="selectedExerciseName"></span></div>
                    <div id="setsContainer"></div>
                    <button class="action-btn" id="addSetButton">+ –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥—Ö–æ–¥</button>
                    <button class="action-btn primary" id="saveWorkoutButton">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É</button>
                </div>
            </div>

            <!-- –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ -->
            <div id="analytics" class="content">
                <div class="title">–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫</div>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value" id="totalWorkouts">0</div>
                        <div class="stat-label">–í—Å–µ–≥–æ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="monthWorkouts">0</div>
                        <div class="stat-label">–ó–∞ —ç—Ç–æ—Ç –º–µ—Å—è—Ü</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="totalSets">0</div>
                        <div class="stat-label">–í—Å–µ–≥–æ –ø–æ–¥—Ö–æ–¥–æ–≤</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="avgWeight">0</div>
                        <div class="stat-label">–°—Ä–µ–¥–Ω–∏–π –≤–µ—Å (–∫–≥)</div>
                    </div>
                </div>
                <div class="chart-container"><canvas id="muscleGroupChart"></canvas></div>
                <div class="chart-container"><canvas id="progressChart"></canvas></div>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="app.js"></script>
    <script>
        // –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è Service Worker –¥–ª—è —Ä–∞–±–æ—Ç—ã –æ—Ñ—Ñ–ª–∞–π–Ω
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function () {
                navigator.serviceWorker.register('./service-worker.js')
                    .then(function (registration) {
                        console.log('ServiceWorker –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω —É—Å–ø–µ—à–Ω–æ: ', registration.scope);
                    })
                    .catch(function (error) {
                        console.log('–û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ ServiceWorker: ', error);
                    });
            });
        }

        // –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –æ—Ñ—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º–∞
        window.addEventListener('online', function () {
            console.log('–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ–Ω–ª–∞–π–Ω');
            if (window.app && window.app.showNotification) {
                window.app.showNotification('‚úÖ –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ', 'success');
            }
        });

        window.addEventListener('offline', function () {
            console.log('–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Ñ—Ñ–ª–∞–π–Ω');
            if (window.app && window.app.showNotification) {
                window.app.showNotification('‚ö†Ô∏è –†–∞–±–æ—Ç–∞–µ–º –±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞', 'warning');
            }
        });
    </script>
</body>
</html>