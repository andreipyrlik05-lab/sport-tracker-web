<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sport Tracker Pro</title>
    <link rel="icon" href="/icons/icon-192.png" type="image/png">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#007AFF">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Sport Tracker Pro">
    <link rel="apple-touch-icon" href="icons/icon-192.png">
    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <div class="notification" id="notification"></div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–µ—Ç–∞–ª–µ–π —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ -->
        <div class="modal" id="workoutModal">
            <div class="modal-content">
                <div class="modal-title" id="modalExerciseName"></div>
                <div class="workout-details" id="workoutDetails"></div>
                <button class="close-modal" onclick="app.closeWorkoutModal()">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è -->
        <div class="modal" id="forgotPasswordModal">
            <div class="modal-content">
                <div class="modal-title">üîê –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è</div>
                <div style="margin-bottom: 15px; color: var(--text-secondary); font-size: 14px;">
                    –í–≤–µ–¥–∏—Ç–µ –≤–∞—à email, –∏ –º—ã –æ—Ç–ø—Ä–∞–≤–∏–º —Å—Å—ã–ª–∫—É –¥–ª—è —Å–±—Ä–æ—Å–∞ –ø–∞—Ä–æ–ª—è
                </div>
                <input type="email" id="forgotPasswordEmail" class="auth-input" placeholder="–í–∞—à email"
                    style="margin-bottom: 15px;">
                <div class="sync-status" id="forgotPasswordStatus"></div>
                <div style="display: flex; gap: 10px;">
                    <button class="close-modal" onclick="app.sendPasswordReset()"
                        style="flex: 1; background: linear-gradient(135deg, var(--success), #00cc66);">
                        –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É
                    </button>
                    <button class="close-modal" onclick="app.closeForgotPassword()"
                        style="flex: 1; background: linear-gradient(135deg, #ff0066, #ff3385);">
                        –û—Ç–º–µ–Ω–∞
                    </button>
                </div>
            </div>
        </div>

        <div class="nav">
            <button class="nav-button active" data-tab="home">üìÖ –ö–∞–ª–µ–Ω–¥–∞—Ä—å</button>
            <button class="nav-button" data-tab="workout">üí™ –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</button>
            <button class="nav-button" data-tab="analytics">üéØ –ü—Ä–æ–≥—Ä–µ—Å—Å</button>
            <button class="nav-button logout-nav" onclick="app.signOut()" style="display: none;">üö™ –í—ã–π—Ç–∏</button>
        </div>

        <!-- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ç–µ–º –ø–æ–¥ –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π -->
        <div class="theme-toggle-container">
            <button class="theme-toggle" onclick="app.toggleTheme()">
                <span class="theme-icon" id="themeIcon">üåô</span>
                <span id="themeText">–¢–µ–º–Ω–∞—è —Ç–µ–º–∞</span>
            </button>
        </div>

        <div id="home" class="content active">
            <div class="title">–ú–æ–∏ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏</div>

            <!-- –°–µ–∫—Ü–∏—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ -->
            <div class="auth-section" id="authSection">
                <div class="auth-title">üîê –í—Ö–æ–¥ / –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</div>
                <div class="auth-form">
                    <form onsubmit="return false;">
                        <input type="email" id="authEmail" class="auth-input" placeholder="Email" required>
                        <input type="password" id="authPassword" class="auth-input" placeholder="–ü–∞—Ä–æ–ª—å"
                            autocomplete="current-password" required>
                        <button class="auth-button" onclick="app.signIn()">–í–æ–π—Ç–∏</button>
                        <button class="auth-button" onclick="app.signUp()">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
                    </form>
                </div>

                <!-- –°—Å—ã–ª–∫–∞ –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è -->
                <a href="#" onclick="app.showForgotPassword()" class="forgot-password-link">
                    –ó–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å?
                </a>

                <div class="sync-status" id="authStatus"></div>
            </div>

            <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ -->
            <div class="user-info" id="userInfo" style="display: none;">
                <div class="user-email" id="userEmail"></div>
            </div>

            <div class="calendar">
                <div class="calendar-header">
                    <button class="calendar-nav" onclick="app.changeMonth(-1)">‚Üê</button>
                    <div class="calendar-month" id="currentMonth"></div>
                    <button class="calendar-nav" onclick="app.changeMonth(1)">‚Üí</button>
                </div>
                <div class="calendar-grid" id="calendarGrid"></div>
            </div>

            <div class="workout-history" id="dateWorkouts" style="display: none;"></div>

            <div class="motivation-section" id="motivationBlock">
                <div class="motivation-title">üí™ –î–≤–∏–≥–∞–π—Å—è –∫ —Ü–µ–ª–∏!</div>
                <div class="motivation-text">
                    –ö–∞–∂–¥–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –¥–µ–ª–∞–µ—Ç —Ç–µ–±—è —Å–∏–ª—å–Ω–µ–µ. –ù–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π—Å—è!
                </div>
                <svg class="motivation-image" viewBox="0 0 200 120" xmlns="http://www.w3.org/2000/svg">
                    <defs>
                        <linearGradient id="bgGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" stop-color="#007AFF" />
                            <stop offset="100%" stop-color="#00d9ff" />
                        </linearGradient>
                        <linearGradient id="dumbbellGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" stop-color="#FFAA00" />
                            <stop offset="100%" stop-color="#FFCC00" />
                        </linearGradient>
                    </defs>

                    <rect width="200" height="120" fill="url(#bgGradient)" rx="10" />

                    <rect x="70" y="50" width="60" height="8" fill="url(#dumbbellGradient)" rx="4" />
                    <rect x="60" y="45" width="10" height="18" fill="url(#dumbbellGradient)" rx="2" />
                    <rect x="130" y="45" width="10" height="18" fill="url(#dumbbellGradient)" rx="2" />

                    <circle cx="50" cy="30" r="3" fill="#00FF88" opacity="0.8">
                        <animate attributeName="r" values="3;5;3" dur="2s" repeatCount="indefinite" />
                    </circle>
                    <circle cx="150" cy="25" r="2" fill="#00FF88" opacity="0.6">
                        <animate attributeName="r" values="2;4;2" dur="1.5s" repeatCount="indefinite" />
                    </circle>
                    <circle cx="180" cy="40" r="4" fill="#00FF88" opacity="0.7">
                        <animate attributeName="r" values="4;6;4" dur="2.5s" repeatCount="indefinite" />
                    </circle>

                    <text x="100" y="90" text-anchor="middle" fill="white" font-family="Arial" font-size="12"
                        font-weight="bold">
                        –¢–í–û–ô –ü–£–¢–¨ –ö –°–ò–õ–ï
                    </text>
                </svg>
                <div class="motivation-quote">
                    "–ü–æ–±–µ–¥–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å —Ä–µ—à–µ–Ω–∏—è –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å"
                </div>
            </div>

            <!-- –°–µ–∫—Ü–∏—è –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞/–∏–º–ø–æ—Ä—Ç–∞ -->
            <div class="backup-section" id="backupSection" style="display: none;">
                <div class="backup-title">üì¶ –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ</div>
                <div class="backup-buttons">
                    <button class="export-button" onclick="app.exportData()">
                        üì§ –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
                    </button>
                    <label class="import-button">
                        üì• –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
                        <input type="file" class="file-input" accept=".json" onchange="app.importData(event)">
                    </label>
                </div>
                <div style="margin-top: 15px; font-size: 12px; color: var(--text-secondary);">
                    –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–ª–∏ –ø–µ—Ä–µ–Ω–æ—Å–∞ –Ω–∞ –¥—Ä—É–≥–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
                </div>
            </div>
        </div>

        <div id="workout" class="content">
            <div class="title">–ù–æ–≤–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</div>

            <!-- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞—Ç—ã —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ -->
            <div class="workout-date-display" id="workoutDateDisplay">
                üìÖ –î–∞—Ç–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏: <span id="selectedDateText">–°–µ–≥–æ–¥–Ω—è</span>
            </div>

            <!-- –°–µ–∫—Ü–∏—è –¥–ª—è –≤–≤–æ–¥–∞ –≤–µ—Å–∞ —Ç–µ–ª–∞ -->
            <div class="body-weight-section" id="bodyWeightSection" style="display: none;">
                <div class="body-weight-title">üèãÔ∏è –í–∞—à –≤–µ—Å –Ω–∞ –º–æ–º–µ–Ω—Ç —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ (–∫–≥):</div>
                <div class="body-weight-input-container">
                    <span class="body-weight-label">–¢–µ–∫—É—â–∏–π –≤–µ—Å:</span>
                    <input type="number" id="bodyWeightInput" class="body-weight-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –≤–µ—Å"
                        min="30" max="300" step="0.1"
                        pattern="[0-9]+([\.,][0-9]+)?"
                        title="–¢–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã, —Ç–æ—á–∫–∞ –∏–ª–∏ –∑–∞–ø—è—Ç–∞—è">
                </div>
                <div style="margin-top: 10px; font-size: 12px; color: var(--text-secondary);">
                    –£–∫–∞–∂–∏—Ç–µ –≤–∞—à —Ç–µ–∫—É—â–∏–π –≤–µ—Å –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
                </div>
            </div>

            <div class="section-title">1. –í—ã–±–µ—Ä–∏—Ç–µ –≥—Ä—É–ø–ø—É –º—ã—à—Ü:</div>
            <div class="groups-container" id="groupsContainer"></div>

            <div id="exercisesSection" style="display: none;">
                <div class="section-title" id="exercisesTitle">2. –í—ã–±–µ—Ä–∏—Ç–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ:</div>
                <div class="exercises-container" id="exercisesContainer"></div>
            </div>

            <div id="setsSection" style="display: none;">
                <div class="section-title" id="setsTitle">3. –ü–æ–¥—Ö–æ–¥—ã –¥–ª—è: <span id="selectedExerciseName"></span></div>
                <div id="setsContainer"></div>
                <button class="add-button" onclick="app.addSet()">+ –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥—Ö–æ–¥</button>
                <button class="save-button" onclick="app.saveWorkout()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É</button>
            </div>
        </div>

        <div id="analytics" class="content">
            <div class="title">–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫</div>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value" id="totalWorkouts">0</div>
                    <div class="stat-label">–í—Å–µ–≥–æ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="monthWorkouts">0</div>
                    <div class="stat-label">–ó–∞ —ç—Ç–æ—Ç –º–µ—Å—è—Ü</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="totalSets">0</div>
                    <div class="stat-label">–í—Å–µ–≥–æ –ø–æ–¥—Ö–æ–¥–æ–≤</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="avgWeight">0</div>
                    <div class="stat-label">–°—Ä–µ–¥–Ω–∏–π –≤–µ—Å (–∫–≥)</div>
                </div>
            </div>
            <div class="chart-container">
                <canvas id="muscleGroupChart"></canvas>
            </div>
            <div class="chart-container">
                <canvas id="progressChart"></canvas>
            </div>

            <!-- –°–µ–∫—Ü–∏—è —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –∞–Ω–∞–ª–∏—Ç–∏–∫–µ —Ç–æ–∂–µ -->
            <div class="backup-section" id="analyticsBackupSection" style="display: none;">
                <div class="backup-title">üì¶ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏</div>
                <div class="backup-buttons">
                    <button class="export-button" onclick="app.exportData()">
                        üì§ –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
                    </button>
                    <label class="import-button">
                        üì• –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
                        <input type="file" class="file-input" accept=".json" onchange="app.importData(event)">
                    </label>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
